<div class="registration_box">
    <div class="registration_table_area">
        <div class="header_title">
            <div class="title">All Zones</div>
            <div class="add_btn">
                <button type="button" class="btn btn-danger" (click)="add_new_zone()">+ Add New</button>
            </div>
            <div class="search_box">
                <input class="form-control" type="search" placeholder="Search..." aria-label="default input example" (keyup)="onSearch($event)">
            </div>
        </div>

        <table class="table table-striped" style="text-align: center;">
            <thead>
                <tr>
                    <th scope="col">S.N.</th>
                    <th scope="col">Zone Area</th>
                    <th scope="col">Vehicles</th>
                    <th scope="col">Action</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let zone of filterZone; let i = index">
                    <th scope="row">{{ i + 1 }}</th>
                    <td>{{ zone.zone_name }}</td>
                    <td>
                        <!-- Show count and trigger vehicle list on click -->
                        <span class="vehicle-count" (click)="showVehicles(zone)">
                            {{ zone.vechicle_id.split(',').length }} Vehicles
                        </span>

                        <!-- Popover or inline list shown conditionally -->
                        <div *ngIf="selectedZone === zone" class="vehicle-list-popup">
                            <ul>
                                <li *ngFor="let vehicle of selectedVehicles">
                                    {{ vehicle.vehicle_name }} - {{ vehicle.vehicle_no }}
                                </li>
                            </ul>
                        </div>
                    </td>
                    <td>
                        <button mat-icon-button (click)="delete_application(zone.id)">
                            <mat-icon>delete</mat-icon>
                        </button>
                    </td>
                </tr>

            </tbody>
        </table>
        <div class="notfound" *ngIf="!filterZone.length">
            <img src="../../../assets/noffound.png" alt="">
            <h3>No Data Found</h3>
        </div>
    </div>
</div>